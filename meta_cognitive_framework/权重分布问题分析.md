# ðŸ”¬ æƒé‡åˆ†å¸ƒé—®é¢˜æ·±åº¦åˆ†æž

## é—®é¢˜å›žé¡¾

### âœ… v3ç‰ˆæœ¬çš„å·¨å¤§æˆåŠŸ

1. **æ¢¯åº¦çˆ†ç‚¸å½»åº•è§£å†³**
   - å›¾3 (Training Loss): Yè½´ä»Ž10â·é™åˆ°10â»Â¹
   - Huber Loss + æ¢¯åº¦è£å‰ªå®Œç¾Žç”Ÿæ•ˆ

2. **å…ƒè®¤çŸ¥ç½‘ç»œçœŸçš„åœ¨å­¦ä¹ **
   - å›¾6 (Meta Learning): Losså‘ˆçŽ°å¥åº·çš„"ä¸Šå‡â†’ä¸‹é™/éœ‡è¡"æ›²çº¿
   - å›¾5: çº¢çº¿(é¢„æµ‹)ç´§ç´§å’¬ä½ç»¿çº¿(ç›®æ ‡)

3. **æœ€ç»ˆæ€§èƒ½ä¼˜è¶Š**
   - å›¾2 (Evaluation): Metaè¾¾åˆ°500åˆ†æ»¡åˆ†
   - Baseåœç•™åœ¨450åˆ†å·¦å³

### âš ï¸ æ–°å‘çŽ°ï¼šæƒé‡çš„"ä¿å®ˆä¸»ä¹‰"

**å…³é”®çŽ°è±¡ï¼ˆå›¾5ï¼‰**ï¼š
- æƒé‡èŒƒå›´ï¼š**[0.90, 1.00]**
- å˜åŒ–å¹…åº¦ï¼šä»…0.1
- å¹³å‡å€¼ï¼š~0.95

**è§£è¯»**ï¼š
```
å½“å‰çŠ¶æ€ï¼šw âˆˆ [0.90, 1.00]
           â†“
æœ‰æ•ˆå­¦ä¹ çŽ‡ = åŽŸLR Ã— w
           = 3e-4 Ã— 0.95
           = 2.85e-4

ç»“è®ºï¼šå…ƒè®¤çŸ¥å˜æˆäº†"é•‡é™å‰‚"
      â†’ å­¦ä¹ å˜æ…¢
      â†’ éœ€è¦æ›´å¤šepisodeæ‰èƒ½è¾¾åˆ°åŒæ ·æ€§èƒ½
```

**è¯æ®ï¼ˆå›¾1ï¼‰**ï¼š
- çº¢çº¿(Meta)èµ·æ­¥æ¯”è“çº¿(Base)æ…¢
- æ™šäº†çº¦20-30ä¸ªepisodeæ‰è¿½ä¸Š
- è™½ç„¶æœ€ç»ˆæ›´é«˜ï¼Œä½†è¿‡ç¨‹æ›´æ…¢

---

## ðŸ” æ ¹æœ¬åŽŸå› åˆ†æž

### åŽŸå› 1: TD Errorç»å¯¹å€¼è¿‡å°

**è§‚å¯Ÿï¼ˆå›¾4ï¼‰**ï¼š
- TD ErrorèŒƒå›´ï¼š0.2 - 0.4
- è¿™æ˜¯å¾ˆå°çš„æ•°å€¼ï¼

**æ—§é€»è¾‘çš„é—®é¢˜**ï¼š
```python
# v3çš„é€»è¾‘
normalized_td = td_error / running_avg_td_error
surprise_bonus = 0.5 * np.tanh(normalized_td - 1.0)
target_w = 1.0 + surprise_bonus

# å½“ td_error = 0.3, running_avg = 0.3 æ—¶
normalized_td = 1.0
surprise_bonus = 0.5 * tanh(0) = 0  # âš ï¸ æ²¡æœ‰å¥–åŠ±ï¼
target_w = 1.0

# å½“ td_error = 0.2 (ç•¥ä½Ž) æ—¶
normalized_td = 0.67
surprise_bonus = 0.5 * tanh(-0.33) â‰ˆ -0.15  # âŒ åè€Œæƒ©ç½šï¼
target_w = 0.85
```

**é—®é¢˜**ï¼š
1. æ‰€æœ‰TD Erroréƒ½å¤ªæŽ¥è¿‘ï¼Œå½’ä¸€åŒ–åŽå·®å¼‚æ¶ˆå¤±
2. tanhé¥±å’Œï¼šå¤§éƒ¨åˆ†å€¼è½åœ¨[-1, 1]çš„çº¿æ€§åŒºï¼Œç¼ºä¹å¯¹æ¯”åº¦
3. æ²¡æœ‰å¼ºåˆ¶åˆ¶é€ æ‰¹æ¬¡å†…çš„é«˜å¯¹æ¯”åº¦

### åŽŸå› 2: ç¼ºä¹æ‰¹æ¬¡å†…å¯¹æ¯”

**æ—§é€»è¾‘çš„ç›²ç‚¹**ï¼š
```
v3ä½¿ç”¨å…¨å±€å½’ä¸€åŒ–ï¼š
  td_error / running_avg_td_error

é—®é¢˜ï¼š
- å¦‚æžœæ•´ä¸ªbatchçš„TD Erroréƒ½å·®ä¸å¤š
- å½’ä¸€åŒ–åŽéƒ½æŽ¥è¿‘1.0
- æƒé‡éƒ½æŽ¥è¿‘1.0
- æ²¡æœ‰ä¼˜å…ˆçº§åŒºåˆ†ï¼
```

**æˆ‘ä»¬éœ€è¦çš„**ï¼š
```
æ‰¹æ¬¡å†…å½’ä¸€åŒ–ï¼ˆZ-Scoreï¼‰ï¼š
  (td_error - batch_mean) / batch_std

æ•ˆæžœï¼š
- å¼ºåˆ¶åœ¨æ‰¹æ¬¡å†…åˆ¶é€ å¯¹æ¯”
- é«˜TD Erroræ ·æœ¬ â†’ z > 0 â†’ w > 1
- ä½ŽTD Erroræ ·æœ¬ â†’ z < 0 â†’ w < 1
- ä¿è¯å¹³å‡æƒé‡ â‰ˆ 1.0
```

### åŽŸå› 3: æƒé‡æ˜ å°„ä¸å¤Ÿæ¿€è¿›

**å½“å‰æ˜ å°„**ï¼š
```python
target_w = 1.0 + 0.5 * tanh(...)
# tanhè¾“å‡º âˆˆ [-1, 1]
# æ‰€ä»¥ target_w âˆˆ [0.5, 1.5]

å®žé™…æƒ…å†µï¼š
# ç”±äºŽå½’ä¸€åŒ–é—®é¢˜ï¼Œtanhè¾“å…¥é€šå¸¸åœ¨[-0.5, 0.5]
# tanhè¾“å‡ºçº¦[-0.4, 0.4]
# target_w âˆˆ [0.8, 1.2]

æœ€ç»ˆè£å‰ªï¼š
target_w = clip(target_w, 0.1, 2.0)  # ç†è®ºèŒƒå›´
# ä½†å®žé™…ä¸Šä»Žæ¥æ²¡æœ‰è§¦åŠè¾¹ç•Œï¼
```

---

## ðŸŽ¯ è§£å†³æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆA: Z-Scoreå¼ºåŠ›å½’ä¸€åŒ–ï¼ˆæŽ¨èï¼‰

#### æ ¸å¿ƒæ€æƒ³
```
ä¸çœ‹ç»å¯¹å€¼ï¼Œåªçœ‹ç›¸å¯¹æŽ’å
æ‰¹æ¬¡å†…å¼ºåˆ¶åˆ¶é€ é«˜å¯¹æ¯”åº¦
```

#### å®žçŽ°
```python
def compute_target_weights_zscore(batch_td_errors):
    # 1. æ‰¹æ¬¡ç»Ÿè®¡
    mean = batch_td_errors.mean()
    std = batch_td_errors.std() + 1e-6
    
    # 2. Z-Scoreæ ‡å‡†åŒ–
    # è¿™ä¸€æ­¥æ˜¯æ ¸å¿ƒï¼å¼ºåˆ¶åˆ¶é€ å¯¹æ¯”
    z_scores = (batch_td_errors - mean) / std
    # z_scoresåˆ†å¸ƒï¼š68%åœ¨[-1,1], 95%åœ¨[-2,2]
    
    # 3. æ˜ å°„åˆ°æƒé‡
    scale_factor = 0.5  # å¯è°ƒèŠ‚æ¿€è¿›ç¨‹åº¦
    target_weights = 1.0 + z_scores * scale_factor
    
    # scale=0.5æ—¶:
    #   z=+2 â†’ w=2.0 (ç‰¹åˆ«å›°éš¾)
    #   z=+1 â†’ w=1.5 (å›°éš¾)
    #   z=0  â†’ w=1.0 (å¹³å‡)
    #   z=-1 â†’ w=0.5 (ç®€å•)
    #   z=-2 â†’ w=0.0 (ç‰¹åˆ«ç®€å•)
    
    # 4. è£å‰ª
    target_weights = torch.clamp(target_weights, 0.1, 2.0)
    
    return target_weights
```

#### æ•ˆæžœä¿è¯
```
âœ“ å¹³å‡æƒé‡ = 1.0 (ä¸æ”¹å˜æ•´ä½“å­¦ä¹ çŽ‡)
âœ“ æ ‡å‡†å·® â‰ˆ scale_factor (å¯æŽ§çš„æ–¹å·®)
âœ“ æ‰¹æ¬¡å†…å¼ºå¯¹æ¯” (è‡ªåŠ¨æŽ’ä¼˜å…ˆçº§)
âœ“ æ— è®ºTD Errorç»å¯¹å€¼å¤šå°‘ï¼Œéƒ½æœ‰æ•ˆ
```

#### å‚æ•°è°ƒèŠ‚
```python
scale_factor = 0.3  # ä¿å®ˆ â†’ w âˆˆ [0.4, 1.6]
scale_factor = 0.5  # ä¸­ç­‰ â†’ w âˆˆ [0.0, 2.0]
scale_factor = 1.0  # æ¿€è¿› â†’ w âˆˆ [-1.0, 3.0] (éœ€è£å‰ª)
```

### æ–¹æ¡ˆB: æŒ‡æ•°æ”¾å¤§ï¼ˆå¥½å¥‡å¿ƒé£Žæ ¼ï¼‰

#### æ ¸å¿ƒæ€æƒ³
```
å¯¹å›°éš¾æ ·æœ¬ç»™äºˆéžçº¿æ€§å¥–åŠ±
è¶Šéš¾çš„è¶Šè¦å¤šå­¦ï¼ˆæŒ‡æ•°çº§ï¼‰
```

#### å®žçŽ°
```python
def compute_target_weights_exponential(batch_td_errors):
    # 1. å½’ä¸€åŒ–åˆ°[0, 1]
    max_error = batch_td_errors.max()
    normalized = batch_td_errors / (max_error + 1e-6)
    
    # 2. æŒ‡æ•°æ”¾å¤§
    # x^2: æ¸©å’Œçš„éžçº¿æ€§
    # x^3: æ›´æ¿€è¿›
    # exp(x)-1: æžç«¯æ¿€è¿›
    target_weights = 1.0 + (normalized ** 2)
    
    # æ•ˆæžœ:
    #   normalized=1.0 (æœ€éš¾) â†’ w=2.0
    #   normalized=0.7       â†’ w=1.49
    #   normalized=0.5       â†’ w=1.25
    #   normalized=0.0 (æœ€ç®€å•) â†’ w=1.0
    
    return torch.clamp(target_weights, 0.5, 2.0)
```

#### ç‰¹ç‚¹
```
âœ“ æ¨¡æ‹ŸçœŸæ­£çš„"å¥½å¥‡å¿ƒ"
âœ“ å¯¹æžç«¯å›°éš¾æ ·æœ¬ç‰¹åˆ«å…³æ³¨
âœ“ å®žçŽ°ç®€å•

âš  å¹³å‡æƒé‡ > 1.0 (ä¼šæé«˜æ•´ä½“å­¦ä¹ çŽ‡)
âš  åªå¥–åŠ±ä¸æƒ©ç½š (æ‰€æœ‰w â‰¥ 1.0)
```

### æ–¹æ¡ˆC: æ··åˆç­–ç•¥ï¼ˆæœ€å¼ºï¼‰

#### æ ¸å¿ƒæ€æƒ³
```
Z-Scoreä¿è¯æ‰¹æ¬¡å¯¹æ¯”
æŒ‡æ•°æ”¾å¤§ç»™é¢å¤–å¥–åŠ±
```

#### å®žçŽ°
```python
def compute_target_weights_hybrid(batch_td_errors):
    # 1. Z-ScoreåŸºç¡€æƒé‡
    mean = batch_td_errors.mean()
    std = batch_td_errors.std() + 1e-6
    z_scores = (batch_td_errors - mean) / std
    base_weights = 1.0 + z_scores * 0.4  # ç¨ä¿å®ˆ
    
    # 2. æŒ‡æ•°åŠ æˆï¼ˆç»™ç‰¹åˆ«éš¾çš„æ ·æœ¬é¢å¤–boostï¼‰
    max_error = batch_td_errors.max()
    normalized = batch_td_errors / (max_error + 1e-6)
    curiosity_bonus = 0.3 * (normalized ** 2)
    
    # 3. ç»„åˆ
    target_weights = base_weights + curiosity_bonus
    
    # æ•ˆæžœï¼š
    # - æ‰¹æ¬¡å†…æœ‰å¯¹æ¯”ï¼ˆZ-Scoreï¼‰
    # - ç»å¯¹å›°éš¾æ ·æœ¬æœ‰é¢å¤–å¥–åŠ±ï¼ˆæŒ‡æ•°ï¼‰
    # - æœ€ä½³å¹³è¡¡
    
    return torch.clamp(target_weights, 0.1, 2.0)
```

---

## ðŸ“Š é¢„æœŸæ•ˆæžœå¯¹æ¯”

### v3 (æ—§) vs v4 (æ–°)

| æŒ‡æ ‡ | v3 | v4 (scale=0.5) | v4 (scale=1.0) |
|------|-----|----------------|----------------|
| **æƒé‡èŒƒå›´** | [0.90, 1.00] | [0.5, 1.5] | [0.0, 2.0] |
| **æƒé‡æ ‡å‡†å·®** | ~0.03 | ~0.5 | ~1.0 |
| **å¹³å‡æƒé‡** | 0.95 | 1.0 | 1.0 |
| **å­¦ä¹ é€Ÿåº¦** | æ…¢äºŽBase | å¿«äºŽBase | è¿œå¿«äºŽBase |
| **ç¨³å®šæ€§** | å¾ˆé«˜ | é«˜ | ä¸­ |

### å›¾5 (Weights) é¢„æœŸå˜åŒ–

```
æ—§ç‰ˆ (v3):
  â•â•â•â•â•â•â•â•â•â•  (0.90-1.00, å‡ ä¹Žå¹³ç›´)

æ–°ç‰ˆ (v4, scale=0.5):
  â•±â•²â•±â•²â•±â•²â•±â•²  (0.5-1.5, åŠ¨æ€æ³¢åŠ¨)

æ–°ç‰ˆ (v4, scale=1.0):
  â•±â•²â•±â•²â•±â•²â•±â•²  (0.0-2.0, å‰§çƒˆæ³¢åŠ¨)
```

### å›¾1 (Training) é¢„æœŸå˜åŒ–

```
æ—§ç‰ˆ:
  Base (è“) â”â”â”â”â”â”â”â”â”â”â”â”â”
  Meta (çº¢) â”â”â”â”â”â”â”â”â”â”â”â”â”  (èµ·æ­¥æ…¢ï¼ŒåŽæœŸè¿½ä¸Š)

æ–°ç‰ˆ (scale=0.5):
  Base (è“) â”â”â”â”â”â”â”â”â”â”â”â”â”
  Meta (çº¢) â”â”â”â”â”â”â”â”â”â”â”â”â”  (èµ·æ­¥å¿«ï¼Œå…¨ç¨‹é¢†å…ˆ)

æ–°ç‰ˆ (scale=1.0):
  Base (è“) â”â”â”â”â”â”â”â”â”â”â”â”â”
  Meta (çº¢) â”â”â”â”â”â”â”â”â”â”â”â”â”  (èµ·æ­¥éžå¸¸å¿«ï¼Œå¯èƒ½æœ‰æ³¢åŠ¨)
```

---

## ðŸ’¡ å…³é”®æ´žå¯Ÿ

### 1. ä¸ºä»€ä¹ˆéœ€è¦é«˜æ–¹å·®ï¼Ÿ

**ç±»æ¯”ï¼šå­¦æ ¡è€ƒè¯•**
```
é”™è¯¯åšæ³• (æ—§):
- å…¨ç­éƒ½åœ¨90-100åˆ†
- è€å¸ˆè¯´ï¼š"éƒ½ä¸é”™ï¼Œæ¯ä¸ªäººé¢å¤–è¾…å¯¼1å°æ—¶"
- ç»“æžœï¼šèµ„æºæµªè´¹ï¼Œæ²¡æœ‰é’ˆå¯¹æ€§

æ­£ç¡®åšæ³• (æ–°):
- åˆ†æ•°åˆ†å¸ƒï¼š40-100åˆ†
- è€å¸ˆè¯´ï¼š"40åˆ†çš„è¾…å¯¼10å°æ—¶ï¼Œ100åˆ†çš„è‡ªå·±çŽ©"
- ç»“æžœï¼šèµ„æºé«˜æ•ˆåˆ†é…
```

**å…ƒè®¤çŸ¥ä¹Ÿæ˜¯å¦‚æ­¤**ï¼š
- ä½Žæ–¹å·® = ä¸€è§†åŒä» = æ•ˆçŽ‡ä½Ž
- é«˜æ–¹å·® = åŒºåˆ«å¯¹å¾… = æ•ˆçŽ‡é«˜

### 2. Z-Scoreçš„æ•°å­¦ç¾Ž

**ä¿è¯ä¸‰ä¸ªæ€§è´¨**ï¼š
```
1. å¹³å‡å€¼ = 1.0  (ä¸æ”¹å˜æ•´ä½“å­¦ä¹ çŽ‡)
2. æœ‰50%æ ·æœ¬w>1, 50%æ ·æœ¬w<1  (å¼ºåˆ¶æŽ’åº)
3. æ ‡å‡†å·®å¯æŽ§  (é€šè¿‡scale_factorè°ƒèŠ‚)
```

è¿™æ˜¯**æ•°å­¦ä¸Šæœ€ä¼˜é›…**çš„è§£å†³æ–¹æ¡ˆï¼

### 3. æ¿€è¿›ç¨‹åº¦çš„é€‰æ‹©

| scale_factor | é€‚ç”¨åœºæ™¯ |
|--------------|----------|
| 0.3 | Baseç®—æ³•ä¸å¤ªç¨³å®šï¼Œéœ€ä¿å®ˆ |
| 0.5 | **æŽ¨èé»˜è®¤å€¼**ï¼Œå¹³è¡¡æ€§èƒ½å’Œç¨³å®šæ€§ |
| 0.7 | Baseå¾ˆç¨³å®šï¼Œæƒ³è¦æ›´å¼ºåŠ é€Ÿ |
| 1.0 | æžé™æ€§èƒ½ï¼Œæ„¿æ„æ‰¿æ‹…é£Žé™© |

### 4. ä¸ºä»€ä¹ˆä¹‹å‰æ²¡æ•ˆæžœï¼Ÿ

**æ ¹æœ¬çŸ›ç›¾**ï¼š
```
v3çš„é€»è¾‘ï¼š
  "å¦‚æžœè¿™ä¸ªbatchçš„TD Erroræ¯”åŽ†å²å¹³å‡é«˜ï¼Œå°±å¤šå­¦"
  
é—®é¢˜ï¼š
  - å¦‚æžœTD Erroré•¿æœŸç¨³å®šåœ¨0.3
  - é‚£æ¯ä¸ªbatchéƒ½"æŽ¥è¿‘å¹³å‡"
  - æ²¡æœ‰batchè¢«ç‰¹åˆ«å¯¹å¾…
  
æ–°é€»è¾‘ï¼š
  "åœ¨è¿™ä¸ªbatchå†…éƒ¨ï¼ŒTD Erroré«˜çš„æ ·æœ¬å¤šå­¦"
  
ä¼˜åŠ¿ï¼š
  - ä¸ç®¡ç»å¯¹å€¼æ˜¯å¤šå°‘
  - æ€»æœ‰ä¸€åŠæ ·æœ¬è¢«åŠ å¼ºï¼Œä¸€åŠè¢«æŠ‘åˆ¶
  - æ‰¹æ‰¹æœ‰å¯¹æ¯”ï¼
```

---

## ðŸš€ è¿è¡Œæµ‹è¯•

### å¿«é€Ÿæµ‹è¯•

```bash
cd meta_cognitive_framework
python test_aggressive.py
```

### è§‚å¯Ÿé‡ç‚¹

1. **å›¾5 (Weights)**: 
   - æœŸå¾…çœ‹åˆ°å®½å¹…æ³¢åŠ¨ [0.5, 1.5]
   - ä¸å†æ˜¯å¹³ç›´çº¿

2. **å›¾4 (Weight Std)**:
   - æœŸå¾… > 0.3
   - è¶Šé«˜è¯´æ˜Žå¯¹æ¯”åº¦è¶Šå¼º

3. **å›¾1 (Training)**:
   - Metaåº”è¯¥èµ·æ­¥æ›´å¿«
   - ä¸å†è½åŽBase

4. **å›¾2 (Evaluation)**:
   - Metaåº”è¯¥æ›´æ—©è¾¾åˆ°é«˜åˆ†
   - æ ·æœ¬æ•ˆçŽ‡æå‡

### å¦‚æžœè¿˜æ˜¯ä¸å¤Ÿæ¿€è¿›

```python
# å°è¯•æ›´å¤§çš„scale_factor
AggressiveMetaWrapper(
    ...,
    scale_factor=0.7,  # ä»Ž0.5å¢žåŠ åˆ°0.7
)

# æˆ–ä½¿ç”¨Ultraç‰ˆæœ¬
UltraAggressiveMetaWrapper(...)  # scale_factor=1.0
```

---

## ðŸ“š ç†è®ºæ”¯æŒ

### Prioritized Experience Replay (PER)

æˆ‘ä»¬çš„v4æœ¬è´¨ä¸Šæ˜¯**PERçš„å˜ä½“**ï¼š

| PER | æˆ‘ä»¬çš„v4 |
|-----|---------|
| è°ƒæ•´é‡‡æ ·æ¦‚çŽ‡ | è°ƒæ•´å­¦ä¹ æƒé‡ |
| P(i) âˆ \|TD_i\|^Î± | w_i âˆ Z-Score(TD_i) |
| éœ€è¦æ–°çš„é‡‡æ ·å™¨ | æ— éœ€æ”¹é‡‡æ ·å™¨ |

**å…±åŒç‚¹**ï¼šéƒ½æ˜¯"å›°éš¾æ ·æœ¬ä¼˜å…ˆ"

### è¯¾ç¨‹å­¦ä¹  (Curriculum Learning)

ä¼ ç»Ÿè¯¾ç¨‹å­¦ä¹ ï¼šäººå·¥è®¾è®¡ easy â†’ hard

**æˆ‘ä»¬çš„v4**ï¼šè‡ªåŠ¨è¯†åˆ«"ç›¸å¯¹éš¾åº¦"
- æ¯ä¸ªbatchè‡ªåŠ¨æŽ’åº
- åŠ¨æ€è°ƒæ•´å­¦ä¹ é‡ç‚¹
- ç­‰ä»·äºŽ"è‡ªé€‚åº”è¯¾ç¨‹"

### æ³¨æ„åŠ›æœºåˆ¶

æƒé‡w = batchç»´åº¦çš„æ³¨æ„åŠ›åˆ†æ•°
- å‘Šè¯‰æ¨¡åž‹"å…³æ³¨å“ªäº›æ ·æœ¬"
- å®žçŽ°è®¡ç®—èµ„æºçš„æ™ºèƒ½åˆ†é…

---

## ðŸŽ‰ æ€»ç»“

### é—®é¢˜è¯Šæ–­
- âœ“ v3æˆåŠŸä½†ä¿å®ˆ
- âœ“ æƒé‡èŒƒå›´è¿‡çª„ [0.90, 1.00]
- âœ“ ç¼ºä¹æ‰¹æ¬¡å†…å¯¹æ¯”åº¦

### è§£å†³æ–¹æ¡ˆ
- âœ… Z-Scoreå½’ä¸€åŒ–ï¼ˆæŽ¨èï¼‰
- âœ… æŒ‡æ•°æ”¾å¤§ï¼ˆå¯é€‰ï¼‰
- âœ… æ··åˆç­–ç•¥ï¼ˆæœ€å¼ºï¼‰

### é¢„æœŸæ•ˆæžœ
- ðŸš€ æƒé‡èŒƒå›´æ‰©å¤§åˆ° [0.5, 1.5]
- ðŸš€ å­¦ä¹ é€Ÿåº¦å¿«äºŽBase
- ðŸš€ æ ·æœ¬æ•ˆçŽ‡æ˜¾è‘—æå‡
- ðŸš€ çœŸæ­£çš„"å¥½å¥‡å¿ƒåŠ é€Ÿ"

### æ ¸å¿ƒå…¬å¼

```python
# v4çš„æ ¸å¿ƒ
z_scores = (td_errors - mean) / std
weights = 1.0 + z_scores * scale_factor
weights = clip(weights, 0.1, 2.0)

# æ•°å­¦ä¿è¯
E[weights] = 1.0  # å¹³å‡å€¼
Var[weights] = scale_factor^2  # æ–¹å·®å¯æŽ§
```

---

**åè¨€**ï¼š
> "è¯æ•ˆæ¸©å’Œä¸æ˜¯é”™ï¼Œåªæ˜¯æ—¶æœºæœªåˆ°ã€‚çŽ°åœ¨ï¼Œæ˜¯æ—¶å€™é‡Šæ”¾çœŸæ­£çš„åŠ›é‡äº†ã€‚"
> 
> â€” å…ƒè®¤çŸ¥æ¡†æž¶ v4

